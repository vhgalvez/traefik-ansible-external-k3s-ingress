[entryPoints]
  [entryPoints.web]
    address = ":80"

  [entryPoints.websecure]
    address = ":443"

  [entryPoints.traefik]
    address = ":8080"

[api]
  dashboard = true

[providers.kubernetesIngress]
  endpoint = "https://{{ vip }}:6443"
  tokenFile = "/var/run/secrets/kubernetes.io/serviceaccount/token"
  namespaces = ["default", "kube-system", "traefik"]

[providers.kubernetesCRD]
  endpoint = "https://{{ vip }}:6443"
  tokenFile = "/var/run/secrets/kubernetes.io/serviceaccount/token"
  namespaces = ["default", "kube-system", "traefik"]

[providers.docker]
  endpoint = "unix:///var/run/docker.sock"
  exposedByDefault = false

[providers.file]
  directory = "/etc/traefik/dynamic_conf"
  watch = true

[log]
  level = "DEBUG"

[certificatesResolvers.default]
  [certificatesResolvers.default.acme]
    email = "admin@example.com"
    storage = "/etc/traefik/acme.json"
    caServer = "https://acme-staging-v02.api.letsencrypt.org/directory"
    [certificatesResolvers.default.acme.httpChallenge]
      entryPoint = "web"